<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="icon" href="src/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="venues.css">
    <title>Eventura</title>
</head>

<body>
    <header>
        <div class="header">
            <div class="logo"></div>
            <div class="navbar">
                <nav>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="#contact">Contact us</a></li>
                        <li><a href="index.html">Log Out</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <main>
        <div class="item-box" id="venueContainer"></div>
        
    </main>

    <footer>
        <div class="foot">
            <div class="foot-cont" id="contact">
                <h2>Contact us</h2>
                <p>For inquiries or support, email us at support@eventura.com</p>
            </div>
            <p>Copyright &copy; all rights are reserved by Eventura.com</p>
        </div>
    </footer>

    <script>
        // Fetch venue data from the server
        async function fetchVenues() {
            try {
                const response = await fetch('/venues');
                if (!response.ok) throw new Error('Failed to fetch venues');
    
                const venues = await response.json();
                const venueContainer = document.getElementById('venueContainer');
    
                // Clear previous content
                venueContainer.innerHTML = '';
    
                // Dynamically create venue boxes
                venues.forEach(venue => {
                    const box = document.createElement('div');
                    box.className = 'box';
    
                    // Convert backslashes to forward slashes in the image path
                    let imageUrl = venue.venueImage.replace(/\\/g, '/');
    
                    // Generate the HTML content for the venue
                    // <h1><a href="info.html?id=${venue.id}">${venue.venueName}</a></h1>  if need any change
                    box.innerHTML = `
                    <div class="venue-content">
                        <h1>${venue.venueName}</a></h1>
                        <p><i class="fa-solid fa-location-dot"></i> ${venue.venueLocation}</p>
                        <p><i class="fa-solid fa-user-group"></i> ${venue.venueCapacity}</p>
                        <p><i class="fa-solid fa-house"></i> ${venue.venueType}</p>
                        <p><i class="fa-solid fa-phone"></i> ${venue.contact}</p>
                        <p><i class="fa-solid fa-envelope"></i> ${venue.email}</p>
                        <p><i class="fa-solid fa-utensils"></i> ${venue.food}</p>
                        <p><i class="fa-solid fa-champagne-glasses"></i> ${venue.occasionType}</p>
                        <p><i class="fa-solid fa-indian-rupee-sign"></i></i> ${venue.price}</p>

                        <div class="btn-container">
                            <button onclick="window.location.href='book.html?venueName=${encodeURIComponent(venue.venueName)}'" id="book-btn">Book Now</button>
                        </div>
                    </div>
    
                    <div class="venue-image">
                        <img src="/${imageUrl}" alt="${venue.venueName}" />
                    </div>
                    `;
    
                    venueContainer.appendChild(box);
                });
            } catch (error) {
                console.error('Error fetching venues:', error);
            }
        }
    
        // Call the fetch function when the page loads
        window.onload = fetchVenues;
    </script>
    
</body>
</html>
